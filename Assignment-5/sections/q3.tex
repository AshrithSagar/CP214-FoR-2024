\section*{Problem 3}
\setcounter{section}{3}
\setcounter{equation}{0}

\textbf{Planar Differential Drive Robot:}
Consider a mobile robot performing planar motion through a differential drive mechanism (see figure).
In a differential drive, we basically undergo some movement by varying the speed of a set of wheels (in this case \( W_{1} \) and \( W_{2} \)) on either side of the robot, to produces a linear and an angular velocity.
\begin{figure}[h]
    \centering
    \includegraphics[width=0.6\textwidth]{figures/images/q3.jpg}
\end{figure}

Any rigid body transformation \( g=(p, R) \in S E(2) \) in this case would consist of a translation \( p \in \mathbb{R}^{2} \) and a \( 2 \times 2 \) rotation matrix \( R \in S O(2) \).
We can represent this in homogeneous coordinates as a \( 3 \times 3 \) matrix:
\[
    g=\left[\begin{array}{ll}
            R & p \\
            0 & 1
        \end{array}\right]
\]
Moreover, any twist \( \hat{\xi} \in \operatorname{se}(2) \) can be represented by a \( 3 \times 3 \) matrix of the form:
\[
    \hat{\xi}=\left[\begin{array}{ll}
            \hat{\omega} & v \\
            0            & 0
        \end{array}\right], \hat{w}=\left[\begin{array}{cc}
            0      & -\omega \\
            \omega & 0
        \end{array}\right], \omega \in \mathbb{R}, v \in \mathbb{R}^{2}
\]
The twist coordinates for \( \hat{\xi} \) have the form \( \xi=(v, \omega) \in \mathbb{R}^{3} \).
These twists can be generated by controlling the speed of the wheels \( W_{1}, W_{2} \).
For this problem you don't have to worry about the exact formulation of this
(Don't need to find answers in terms of \( W_{1}, W_{2} \)).
Further, note that we can consider \( v \) as a vector in the plane and \( \omega \) as a scalar.

Now given this information, answer all the following questions.
\begin{enumerate}[label= (\alph*)]
    \item Show that the matrix exponential of a twist in \( s e(2) \) gives a rigid body transformation in \( S E(2) \).
          Consider both the pure translation case, \( \xi= \) \( (v, 0) \) and the general case, \( \xi=(v, \omega), \omega \neq 0 \).
    \item Show that the planar twists which correspond to pure rotation about a point \( r \) and pure translation in a direction \( v \) are given by,
          \[
              \xi=\left[\begin{array}{c}
                      r_{y}  \\
                      -r_{x} \\
                      1
                  \end{array}\right] \text { (pure rotation), } \xi=\left[\begin{array}{c}
                      v_{x} \\
                      v_{y} \\
                      0
                  \end{array}\right] \text { (pure translation) }
          \]
    \item Show that the matrices \( \hat{V}^{s}=\dot{g} g^{-1} \) and \( \hat{V}^{b}=g^{-1} \dot{g} \) are both twists.
          Define and interpret the spatial velocity \( V^{s} \in \mathbb{R}^{3} \) and the body velocity \( V^{b} \in \mathbb{R}^{3} \)
\end{enumerate}

\clearpage
\subsection*{Solution}

\subsubsection*{(a) \( \hat{\xi} \in se(2) \implies e^{\hat{\xi}} \in SE(2) \) is a rigid body transformation}

Given a twist \( \hat{\xi} \in se(2) \) with twist coordinates \( \xi = (v, \omega) \in \mathbb{R}^3, v \in \mathbb{R}^2, \omega \in \mathbb{R} \), we need to show that the matrix exponential \( e^{\hat{\xi}} \in SE(2) \) is a rigid body transformation.

As given, we have that the group \( SE(2) \) is defined by, in homogeneous coordinates as
\begin{equation}\label{eq:SE2-homogeneous}
    SE(2) = \left \{ g = \begin{bmatrix}
        R & p \\
        0 & 1
    \end{bmatrix} \; \middle| \; R \in SO(2), \, p \in \mathbb{R}^2 \right \}
\end{equation}

The matrix exponential of a twist \( \hat{\xi} \in se(2) \) is given by:
\[
    e^{\hat{\xi}} = \sum_{k=0}^{\infty} \frac{1}{k!} \hat{\xi}^k
\]

Case 1: Pure translation \( \xi = (v, 0) \)

The twist in this case is \( \hat{\xi} = \left[ \begin{array}{cc} 0 & v \\ 0 & 0 \end{array} \right]_{3\times 3} \), and the the matrix exponential is
\begin{align*}
    e^{\hat{\xi}}
     & =
    \sum_{k=0}^{\infty} \frac{1}{k!} \hat{\xi}^k
    =
    I_{3\times 3} + \sum_{k=1}^{\infty} \frac{1}{k!}
    \begin{bmatrix}
        0 & v \\
        0 & 0
    \end{bmatrix}
    ^k
    \\ & =
    \begin{bmatrix}
        I_{2\times 2} & 0 \\
        0             & 1
    \end{bmatrix}
    +
    \begin{bmatrix}
        0 & v \\
        0 & 0
    \end{bmatrix}
    +
    \cancel{\sum_{k=2}^{\infty} \frac{1}{k!}
        \begin{bmatrix}
            0 & v \\
            0 & 0
        \end{bmatrix}
        ^k
    }
    =
    \begin{bmatrix}
        I_{2\times 2} & v \\
        0             & 1
    \end{bmatrix}_{3\times 3}
\end{align*}
From equation~\eqref{eq:SE2-homogeneous}, we see that \( e^{\hat{\xi}} \) is a rigid body transformation in \( SE(2) \), for the case of pure translation.

Case 2: General case \( \xi = (v, \omega), \omega \neq 0 \)

The twist in this case is \( \hat{\xi} = \left[ \begin{array}{cc} \hat \omega & v \\ 0 & 0 \end{array} \right]_{3\times 3} \).
Now, define \( g = \begin{bmatrix}
    I_{2\times 2} & \hat \omega v \\
    0             & 1
\end{bmatrix}_{3\times 3}
\).
We can see that \( g \in SE(2) \), and it's inverse \( g^{-1} = \begin{bmatrix}
    I_{2\times 2} & -\hat \omega v \\
    0             & 1
\end{bmatrix}_{3\times 3} \in SE(2)
\).
Now, we define \( \hat \xi' \) using \( \hat \xi = g \hat \xi' g^{-1} \), and we get
\begin{align*}
    \hat \xi'
     & =
    g^{-1} \hat \xi g
    =
    \begin{bmatrix}
        I_{2\times 2} & -\hat \omega v \\
        0             & 1
    \end{bmatrix}
    \begin{bmatrix}
        \hat \omega & v \\
        0           & 0
    \end{bmatrix}
    \begin{bmatrix}
        I_{2\times 2} & \hat \omega v \\
        0             & 1
    \end{bmatrix}
    \\ & =
    \begin{bmatrix}
        I_{2\times 2} & -\hat \omega v \\
        0             & 1
    \end{bmatrix}
    \begin{bmatrix}
        \hat \omega & \hat \omega^2 v + v \\
        0           & 0
    \end{bmatrix}
    =
    \begin{bmatrix}
        \hat \omega & \hat \omega^2 v + v \\
        0           & 0
    \end{bmatrix}
    \in se(2)
\end{align*}
Now, using
\begin{align*}
    e^{\hat \xi}
     & =
    e^{g \hat \xi' g^{-1}}
    =
    g e^{\hat \xi'} g^{-1}
\end{align*}
we can evaluate the matrix exponential \( \hat \xi' \) as
\begin{align*}
    e^{\hat \xi'}
     & =
    \sum_{k=0}^{\infty} \frac{1}{k!} \hat \xi'^k
    =
    I_{3\times 3} + \sum_{k=1}^{\infty} \frac{1}{k!}
    \begin{bmatrix}
        \hat \omega & \hat \omega^2 v + v \\
        0           & 0
    \end{bmatrix}
    ^k
    \\ & =
    \begin{bmatrix}
        I_{2\times 2} & 0 \\
        0             & 1
    \end{bmatrix}
    +
    \begin{bmatrix}
        \hat \omega & \hat \omega^2 v + v \\
        0           & 0
    \end{bmatrix}
    +
    \sum_{k=2}^{\infty} \frac{1}{k!}
    \begin{bmatrix}
        \hat \omega & \hat \omega^2 v + v \\
        0           & 0
    \end{bmatrix}
    ^k
    \\ & =
    \begin{bmatrix}
        I_{2\times 2} & 0 \\
        0             & 1
    \end{bmatrix}
    +
    \begin{bmatrix}
        \hat \omega & \hat \omega^2 v + v \\
        0           & 0
    \end{bmatrix}
    +
    \sum_{k=2}^{\infty} \frac{1}{k!}
    \begin{bmatrix}
        \hat \omega ^k & 0 \\
        0              & 0
    \end{bmatrix}
    \\ & =
    \begin{bmatrix}
        e^{\hat \omega} & \hat \omega^2 v + v \\
        0               & 1
    \end{bmatrix}
\end{align*}
Now,
\begin{align*}
    \hat \omega^2 v + v
     & =
    \begin{bmatrix}
        0      & -\omega \\
        \omega & 0
    \end{bmatrix}
    \begin{bmatrix}
        0      & -\omega \\
        \omega & 0
    \end{bmatrix}
    \begin{bmatrix}
        v_x \\
        v_y
    \end{bmatrix}
    +
    \begin{bmatrix}
        v_x \\
        v_y
    \end{bmatrix}
    =
    \begin{bmatrix}
        -\omega^2 v_x + v_x \\
        - \omega^2 v_y + v_y
    \end{bmatrix}
    \in \mathbb{R}^2
\end{align*}
Thereby, \( e^{\hat \xi'} \in SE(2) \).
\begin{align*}
    \implies
    e^{\hat \xi}
     & =
    g e^{\hat \xi'} g^{-1}
    =
    \begin{bmatrix}
        I_{2\times 2} & \hat \omega v \\
        0             & 1
    \end{bmatrix}
    \begin{bmatrix}
        e^{\hat \omega} & \hat \omega^2 v + v \\
        0               & 1
    \end{bmatrix}
    \begin{bmatrix}
        I_{2\times 2} & -\hat \omega v \\
        0             & 1
    \end{bmatrix}
    \\ & =
    \begin{bmatrix}
        I_{2\times 2} & \hat \omega v \\
        0             & 1
    \end{bmatrix}
    \begin{bmatrix}
        e^{\hat \omega} & - e^{\hat\omega} \hat \omega v + \hat \omega^2 v + v \\
        0               & 1
    \end{bmatrix}
    =
    \begin{bmatrix}
        e^{\hat \omega} & - e^{\hat\omega} \hat \omega v + \hat \omega^2 v + v + \hat \omega v \\
        0               & 1
    \end{bmatrix}
\end{align*}
\( e^{\hat \omega} \in SO(2) \) and \( - e^{\hat\omega} \hat \omega v + \hat \omega^2 v + v + \hat \omega v \in \mathbb{R}^2 \), there by we can see that the matrix exponential of a twist in \( se(2) \) gives a rigid body transformation in \( SE(2) \).

\subsubsection*{(b) Planar twists for pure rotation and translation}

A pure rotation about a point \( r = (r_x, r_y) \) corresponds to a twist where the velocity vector \( v \) at the origin is perpendicular to the vector from the origin to the point of rotation, all of them being in the plane.
We can see that, for rotating around the point \( r \) with an angular velocity of 1 radian per second, we have
\[
    \hat{\xi} = \begin{bmatrix}
        0 & -1 & r_y  \\
        1 & 0  & -r_x \\
        0 & 0  & 0
    \end{bmatrix}
    \implies
    \xi = \begin{bmatrix}
        r_y  \\
        -r_x \\
        1
    \end{bmatrix}
\]

A pure translation corresponds to a twist where there is no angular velocity (i.e., \( \omega = 0 \)).
For movement in the direction of the vector \( v \) with no rotation, we have
\[
    \hat{\xi} = \begin{bmatrix}
        0 & 0 & v_x \\
        0 & 0 & v_y \\
        0 & 0 & 0
    \end{bmatrix}
    \implies
    \xi = \begin{bmatrix}
        v_x \\
        v_y \\
        0
    \end{bmatrix}
\]

\clearpage
\subsubsection*{(c) \( \hat{V}^{s} = \dot{g} g^{-1} \) and \( \hat{V}^{b} = g^{-1} \dot{g} \) are twists}

The spatial velocity is defined as:
\[
    \hat{V}^{s} = \dot{g} g^{-1}
\]
where \( g \in SE(2) \) is the rigid body transformation.
This describes the velocity of the body with respect to the fixed frame in space.
\( g^{-1} \) and \( \dot g \) are given by
\begin{equation*}
    g^{-1} = \begin{bmatrix}
        R^T & -R^T p \\
        0   & 1
    \end{bmatrix},
    \quad
    \dot{g} = \begin{bmatrix}
        \dot R & \dot v \\
        0      & 0
    \end{bmatrix}
\end{equation*}
\begin{align*}
    \implies
    \hat{V}^{s}
     & =
    \dot{g} g^{-1}
    =
    \begin{bmatrix}
        \dot R & \dot v \\
        0      & 0
    \end{bmatrix}
    \begin{bmatrix}
        R^T & -R^T p \\
        0   & 1
    \end{bmatrix}
    =
    \begin{bmatrix}
        \dot R R^T & \dot v - \dot R R^T p \\
        0          & 0
    \end{bmatrix}
    \\ & =
    \begin{bmatrix}
        0            & -\omega^{(s)} & v_x^{(s)} \\
        \omega^{(s)} & 0             & v_y^{(s)} \\
        0            & 0             & 0
    \end{bmatrix}
    \implies
    \hat{V}^{s} \text{ is a twist}
\end{align*}
since \( \dot R R^T \) can be expressed as a skew-symmetric matrix.

The body velocity is defined as:
\[
    \hat{V}^{b} = g^{-1} \dot{g}
\]
This represents the velocity of the robot as seen in the body frame (i.e., attached to the robot).
\begin{align*}
    \implies
    \hat{V}^{b}
     & =
    g^{-1} \dot{g}
    =
    \begin{bmatrix}
        R^T & -R^T p \\
        0   & 1
    \end{bmatrix}
    \begin{bmatrix}
        \dot R & \dot v \\
        0      & 0
    \end{bmatrix}
    =
    \begin{bmatrix}
        R^T \dot R & R^T \dot v \\
        0          & 0
    \end{bmatrix}
    \\ & =
    \begin{bmatrix}
        0            & -\omega^{(b)} & v_x^{(b)} \\
        \omega^{(b)} & 0             & v_y^{(b)} \\
        0            & 0             & 0
    \end{bmatrix}
    \implies
    \hat{V}^{b} \text{ is a twist}
\end{align*}

The spatial velocity \( V^s \) is the velocity observed from a stationary world frame.
The body velocity \( V^b \) is the velocity measured relative to the robot's own frame of reference.
